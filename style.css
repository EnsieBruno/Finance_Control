/* --- Estilos Globais e Tema (PicPay) --- */
:root {
    /* Cores */
    --purple-light: #E6F8F0; 
    --purple-main: #11C76F; 
    --purple-dark: #0d9a5f; /* Tom mais escuro para hover */
    --gray-dark: #333333;
    --gray-medium: #666666;
    --gray-light: #ebebeb;
    --gray-very-light: #f7f7f7;
    --green-paid: #00b900;
    --red-alert: #e53e3e;
    --red-dark: #c53030; /* Tom mais escuro para hover */
    --red-light-hover: rgba(229, 62, 62, 0.1); /* Fundo leve para hover ghost */
    --card-bg: #ffffff;
    --border-color: #e2e2e2;
    --body-bg: var(--gray-very-light);
    --text-color: var(--gray-dark);
    --text-light: #ffffff; /* Cor de texto para botões com fundo */
    --bg-hover: rgba(0, 0, 0, 0.05); /* Fundo genérico para hover */
    /* Bordas */
    --border-radius-sm: 8px; 
    --border-radius-md: 16px; 
    --border-radius-lg: 20px;
    --border-radius-full: 9999px;
    /* Fontes */
    font-family: 'Inter', sans-serif;
    color: var(--text-color);
    transition: background-color 0.3s, color 0.3s;
}
:root.dark-mode { 
    --purple-light: #0B4E2B; 
    --purple-main: #11C76F; 
    --purple-dark: #15e88a; 
    --gray-dark: #e0e0e0;
    --gray-medium: #b0b0b0;
    --gray-light: #444;
    --gray-very-light: #121212;
    --green-paid: #27c24c;
    --red-alert: #ff6b6b;
    --red-dark: #ff8787; 
    --red-light-hover: rgba(255, 107, 107, 0.15); 
    --card-bg: #1e1e1e;
    --border-color: #333;
    --body-bg: var(--gray-very-light);
    --text-color: var(--gray-dark);
    --text-light: #ffffff; 
    --bg-hover: rgba(255, 255, 255, 0.1);
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body { background: var(--body-bg); color: var(--text-color); padding: 20px; line-height: 1.6; overflow-x: hidden; }

/* --- Tela de Autenticação --- */
#auth-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 80vh; text-align: center; }
.login-card { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: var(--border-radius-lg); padding: 40px 30px; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1); max-width: 400px; width: 90%; }
.login-card h1 { color: var(--purple-main); margin-bottom: 10px; font-size: 1.8rem; }
.login-card p { color: var(--gray-medium); margin-bottom: 24px; }
.auth-toggle-buttons { display: flex; background: var(--gray-very-light); border-radius: var(--border-radius-full); padding: 4px; margin-bottom: 24px; }
.auth-toggle-btn { flex: 1; padding: 10px; border: none; border-radius: var(--border-radius-full); background: transparent; color: var(--gray-medium); font-weight: 600; font-size: 0.9rem; cursor: pointer; transition: background-color 0.2s, color 0.2s; position: relative; } 
.auth-toggle-btn.active { background: var(--purple-main); color: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
#auth-form .form-group { text-align: left; margin-bottom: 16px; }
.form-group-extra { text-align: right; margin-top: -10px; margin-bottom: 16px; }
.form-group-extra a { font-size: 0.8rem; color: var(--gray-medium); text-decoration: none; }
.form-group-extra a:hover { color: var(--purple-main); text-decoration: underline; }
#auth-form .form-actions { margin-top: 20px; }
#auth-message { font-size: 0.875rem; margin-top: 16px; min-height: 1.2em; }
#auth-message.error { color: var(--red-alert); }
#auth-message.success { color: var(--green-paid); }

/* --- Container Principal --- */
#app-container { display: none; width: 100%; margin: 0 auto; flex-direction: column; gap: 20px; position: relative; margin-bottom: 80px; }
h1 { font-size: 2rem; font-weight: 800; color: var(--purple-main); }
h2 { font-size: 1.2rem; font-weight: 600; margin-bottom: 16px; }
h3 { font-size: 1rem; font-weight: 500; color: var(--gray-medium); margin: 0; }
.muted { font-size: 0.875rem; color: var(--gray-medium); }
header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 15px; }
.header-main { display: flex; flex-direction: column; }
.header-actions { display: flex; align-items: center; gap: 10px; }
#user-info { display: flex; align-items: center; gap: 10px; background: var(--card-bg); padding: 8px 12px; border-radius: var(--border-radius-full); border: 1px solid var(--border-color); font-size: 0.875rem; }
#user-avatar { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; border: 2px solid var(--purple-main); }
#user-email { font-weight: 500; color: var(--gray-dark); max-width: 150px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.btn-icon { background: transparent; border: none; cursor: pointer; font-size: 24px; padding: 8px; border-radius: var(--border-radius-full); transition: transform 0.2s, background-color 0.2s; color: var(--text-color); }
.btn-icon:hover { background-color: var(--bg-hover); } 
.card { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: var(--border-radius-lg); padding: 24px; margin-bottom: 10px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05); }

/* --- Resumo --- */
.summary-card { display: block; }
.balance-header { display: flex; justify-content: space-between; align-items: center; width: 100%; gap: 30px; margin-bottom: 0; flex-wrap: wrap; }
.balance-header h2 { margin: 0; flex-shrink: 0; white-space: nowrap; }
.balance-total-display { text-align: right; flex-shrink: 0; }
.balance-value { font-size: 1.75rem; font-weight: 700; color: var(--purple-main); }
.balance-inputs-container { display: flex; gap: 20px; justify-content: flex-start; flex-wrap: wrap; flex-grow: 1; }
.balance-item { display: flex; flex-direction: column; gap: 8px; min-width: 150px; }
.balance-item label { font-weight: 500; color: var(--text-color); }
.balance-input { width: 100%; text-align: left; padding: 10px; border-radius: var(--border-radius-sm); border: 1px solid var(--border-color); background: var(--gray-very-light); color: var(--text-color); font-size: 1rem; font-weight: 400; }

/* --- Forms --- */
.form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.form-group { display: flex; flex-direction: column; gap: 6px; }
.password-input-wrapper { position: relative; }
.form-group.full-width { grid-column: 1 / -1; }
label { font-size: 0.875rem; color: var(--gray-medium); margin: 20px 10px 0 0; }
input, select { padding: 12px; border-radius: var(--border-radius-sm); border: 1px solid var(--border-color); font-size: 1rem; background: var(--gray-very-light); color: var(--text-color); }
input[type="password"], input[type="text"].password-input-field { padding-right: 45px; } 
input:focus, select:focus { outline: 2px solid var(--purple-main); border-color: transparent; }
.password-toggle-icon { position: absolute; top: 70%; right: 0px; transform: translateY(-50%); cursor: pointer; user-select: none; color: var(--gray-medium); display: flex; align-items: center; justify-content: center; width: 40px; height: 100%; padding-top: 15px; } /* Posicionamento e estilo do span do ícone */
.password-toggle-icon:hover svg { color: var(--purple-main); } 
.password-toggle-icon svg { width: 20px; height: 20px; fill: currentColor; } 
.form-actions { display: flex; justify-content: flex-end; gap: 12px; margin-top: 24px; }
.full-width-btn { width: 100%; }

/* --- Botões --- */
.btn { padding: 10px 15px; border: none; border-radius: var(--border-radius-sm); font-size: 0.9em; cursor: pointer; transition: background-color 0.2s, color 0.2s, border-color 0.2s, opacity 0.2s, filter 0.2s, transform 0.2s; font-weight: 600; display: inline-flex; align-items: center; justify-content: center; gap: 5px; text-decoration: none; }
.btn:hover:not(:disabled) { filter: brightness(1.1); transform: translateY(-1px); } 
.btn:disabled { opacity: 0.6; cursor: not-allowed; filter: none; transform: none; } /* Reset hover effects when disabled */
.btn.primary { background-color: var(--purple-main); color: var(--text-light); }
.btn.primary:hover:not(:disabled) { background-color: var(--purple-dark); }
.btn.ghost { background-color: transparent; border: 1px solid var(--border-color); color: var(--text-color); } 
.btn.ghost:hover:not(:disabled) { background-color: var(--bg-hover); border-color: var(--gray-medium); } 
.btn.danger { background-color: var(--red-alert); color: var(--text-light); border: none; }
.btn.danger:hover:not(:disabled) { background-color: var(--red-dark); }
.btn.danger-ghost { background-color: transparent; border: 1px solid var(--red-alert); color: var(--red-alert); }
.btn.danger-ghost:hover:not(:disabled) { background-color: var(--red-light-hover); color: var(--red-dark); }
.btn.delete-item-btn { background-color: transparent; color: var(--red-alert); border: none; padding: 5px; font-size: 1.1em; border-radius: 50%; width: 30px; height: 30px; line-height: 1; display: inline-flex; align-items: center; justify-content: center; } /* Adicionado display, align, justify */
.btn.delete-item-btn:hover:not(:disabled) { background-color: var(--red-light-hover); color: var(--red-dark); }
#btnClear { background-color: transparent; border: none; color: var(--red-alert); font-weight: 500; text-decoration: none; padding: 10px 0; margin-left: 10px; border-radius: var(--border-radius-sm); }
#btnClear:hover:not(:disabled) { color: var(--red-dark); text-decoration: none; background-color: var(--red-light-hover); transform: none; filter: none; }
#removeSelectedBtn { border-radius: var(--border-radius-full); padding: 8px 16px; font-size: 0.85em; } /* Já tem .btn.danger */
.btn.small { padding: 6px 10px; font-size: 0.85em; }

/* --- Floating Elements --- */
.floating-btn { position: fixed; bottom: 85px; right: 10px; z-index: 1000; cursor: pointer; width: 56px; height: 56px; padding: 0; border-radius: var(--border-radius-full); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); border: none; display: flex; justify-content: center; align-items: center; font-size: 28px; font-weight: 300; background-color: var(--purple-main); color: var(--text-light); } /* Garante cor do botão + */
.floating-btn:hover { filter: brightness(1.1); }
.floating-btn span { transition: transform 0.3s; }
.floating-btn.active span { transform: rotate(45deg); }
.floating-card { position: fixed; bottom: 100px; right: 40px; width: min(90vw, 400px); background: var(--card-bg); border: 1px solid var(--border-color); border-radius: var(--border-radius-lg); padding: 24px; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2); z-index: 999; transform-origin: bottom right; animation: fadeInScale 0.3s ease-out; }
.floating-card.hidden { display: none; }
.card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.card-header h2 { margin: 0; }
.close-btn { font-size: 1.5rem; background: none; border: none; cursor: pointer; color: var(--gray-medium); padding: 5px;}
.close-btn:hover { color: var(--text-color); }
@keyframes fadeInScale { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }

/* --- Card Minha Conta --- */
#manageAccountCard h3 { margin-bottom: 10px; }
#manageAccountCard .form-group input[type="password"] { margin-bottom: 0; } 
.divider { border: none; border-top: 1px solid var(--border-color); margin: 24px 0; }
.auth-message { font-size: 0.875rem; margin-top: 16px; min-height: 1.2em; }
.auth-message.error { color: var(--red-alert); }
.auth-message.success { color: var(--green-paid); }

/* --- Tabelas --- */
.tables-section { padding: 24px; }
.gasto-tables-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-top: 24px; }
@media (max-width: 900px) { .gasto-tables-grid { grid-template-columns: 1fr; } }
.table-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px; }
.table-actions { display: flex; flex-wrap: wrap; gap: 12px; }
table { width: 100%; border-collapse: collapse; font-size: 1rem; background: transparent; }
thead th { background: var(--purple-main); color: #fff; padding: 14px; text-align: left; font-weight: 600; }
thead th:first-child { border-top-left-radius: var(--border-radius-sm); }
thead th:last-child { border-top-right-radius: var(--border-radius-sm); }
tbody tr:last-child td:first-child { border-bottom-left-radius: var(--border-radius-sm); }
tbody tr:last-child td:last-child { border-bottom-right-radius: var(--border-radius-sm); }
tbody td { padding: 14px; border-bottom: 1px solid var(--border-color); vertical-align: middle; background-color: var(--card-bg); }
tbody tr:last-child td { border-bottom: 1px solid var(--border-color); }
.actions-cell { white-space: nowrap; text-align: right; } 
.status-check, .select-check, .mark-paid-all-check, .select-all-check { width: 20px; height: 20px; cursor: pointer; accent-color: var(--purple-main); vertical-align: middle; } 

/* --- Edição Inline --- */
.edit-mode { width: 100%; padding: 6px; font-size: 0.875rem; box-sizing: border-box; border-radius: var(--border-radius-sm); }
.edit-mode-select { width: 100%; font-size: 0.875rem; padding: 6px; border-radius: var(--border-radius-sm); }

/* --- Barra de Seleção --- */
.selection-actions { position: fixed; bottom: 0; left: 0; width: 100%; background: var(--card-bg); border-top: 1px solid var(--border-color); padding: 15px 20px; box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.1); z-index: 998; display: flex; justify-content: space-between; align-items: center; gap: 20px; }
.selection-actions.hidden { display: none; }
.selection-info h3 { margin: 0 0 5px 0; font-size: 1.2rem; font-weight: 700; color: var(--purple-main); }
.selection-info .muted { font-size: 0.75rem; }

/* --- Botões Mobile Bulk --- */
.mobile-bulk-actions { display: none; } 

/* --- Media Queries (Mobile) --- */
@media (max-width: 550px) {
    body { padding: 10px; }
    #app-container { margin-bottom: 140px; }
    body { overflow-x: hidden; }
    header { align-items: flex-start; }
    .header-main { width: 100%; }
    .header-actions { width: 100%; justify-content: space-between; }
    .header-actions .btn { padding: 10px 15px; font-size: 0.8rem; }
    #user-info { flex-grow: 1; }
    #user-email { max-width: 120px; }
    .floating-card { right: 5vw; bottom: 140px; width: 90vw; padding: 24px 15px; }
    .floating-btn { right: 20px; bottom: 50px; }
    .balance-header { flex-direction: column; align-items: flex-start; gap: 20px; width: 100%; }
    .balance-header h2 { width: 100%; text-align: left; order: 1; }
    .balance-inputs-container { flex-direction: column; width: 100%; order: 2; }
    .balance-item { min-width: unset; width: 100%; }
    .balance-total-display { width: 100%; text-align: left; order: 3; }
    .form-grid { grid-template-columns: 1fr; }
    .form-grid .form-group input, .form-grid .form-group select { padding: 12px 8px; }
    
    /* --- Estilização Específica para o grid do "Adicionar Conta" --- */
    /* Mantém o grid de 2 colunas no mobile para o form de adicionar,
      para que os campos fiquem lado a lado e o card não fique tão alto.
      Isso sobrepõe a regra geral ".form-grid { grid-template-columns: 1fr; }"
    */
    .add-form-grid {
        grid-template-columns: 1fr 1fr;
        gap: 12px; /* Reduz o espaçamento no mobile */
    }

    /* Ajuste nos labels e inputs dentro deste grid para economizar espaço */
    .add-form-grid .form-group label {
        font-size: 0.8rem;
        margin-top: 0; /* Remove o margin-top padrão do label */
    }
    
    .add-form-grid .form-group input, 
    .add-form-grid .form-group select {
        padding: 10px 8px; /* Padding um pouco menor */
        font-size: 0.95rem; /* Fonte ligeiramente menor */
    }
    /* O .form-group.full-width (Descrição) já está configurado para ocupar as 2 colunas */
    
    /* Ajuste padding senha mobile */
    input[type="password"], input[type="text"].password-input-field { padding-right: 45px; } 
    .password-toggle-icon { padding-top: 10px; } 

    .table-header { align-items: flex-start; flex-direction: column; }
    .table-actions { flex-direction: column; gap: 8px; width: 100%; }
    .table-actions .btn { width: 100%; text-align: center; }
    .selection-actions { flex-direction: column; align-items: stretch; }
    .selection-info { text-align: left; }
    #removeSelectedBtn { width: 100%; border-radius: var(--border-radius-sm); } 
    .status-text-mobile-hide { display: none; }
    #addFormCard .close-btn, #manageAccountCard .close-btn { display: none; }
    #salarioTable, #valeTable { border: none; }
    #salarioTable thead, #valeTable thead { display: none; } 
    #salarioTable tr, #valeTable tr { display: block; margin-bottom: 16px; padding: 15px; border: 1px solid var(--border-color); border-radius: var(--border-radius-md); background: var(--card-bg); box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); cursor: pointer; }
    #salarioTable tr.expanded, #valeTable tr.expanded { padding-bottom: 5px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); border-color: var(--purple-main); }
    #salarioTable td, #valeTable td { display: block; text-align: right; padding: 8px 0 !important; border: none; position: relative; }
    #salarioTable td:nth-child(4), #valeTable td:nth-child(4), #salarioTable td:nth-child(5), #valeTable td:nth-child(5), #salarioTable td:nth-child(6), #valeTable td:nth-child(6), #salarioTable td:nth-child(7), #valeTable td:nth-child(7) { display: none; opacity: 0; height: 0; transition: opacity 0.3s ease-in-out, height 0.3s ease-in-out, display 0.3s; }
    #salarioTable td:nth-child(2), #valeTable td:nth-child(2) { border-bottom: 1px dashed var(--border-color); margin-bottom: 8px; }
    #salarioTable tr:not(.expanded) td:nth-child(3), #valeTable tr:not(.expanded) td:nth-child(3) { display: block; opacity: 1; height: auto; font-weight: 700; font-size: 1.1rem; color: var(--purple-main); border-bottom: 1px dashed var(--border-color); }
    #salarioTable tr:not(.expanded) td:nth-child(1), #valeTable tr:not(.expanded) td:nth-child(1), #salarioTable tr.expanded td:nth-child(1), #valeTable tr.expanded td:nth-child(1) { display: flex; opacity: 1; height: auto; padding-bottom: 5px !important; }
    #salarioTable tr.expanded td, #valeTable tr.expanded td { display: block; opacity: 1; height: auto; font-weight: 400; font-size: 1rem; color: var(--text-color); border-bottom: none; }
    #salarioTable tr.expanded td:nth-child(6), #valeTable tr.expanded td:nth-child(6) { border-bottom: 1px dashed var(--border-color); }
    #salarioTable tr.expanded td:nth-child(7), #valeTable tr.expanded td:nth-child(7) { text-align: right; }
    #salarioTable td::before, #valeTable td::before { content: attr(data-label) ":"; float: left; font-weight: 600; color: var(--gray-medium); padding-right: 10px; }
    .actions-cell { text-align: right; }
    .actions-cell::before { display: none; }
    #salarioTable td:nth-child(1), #valeTable td:nth-child(1), #salarioTable td:nth-child(6), #valeTable td:nth-child(6) { text-align: right; border-bottom: 1px dashed var(--border-color); }
    .edit-mode, .edit-mode-select { width: 60%; max-width: 200px; font-size: 0.875rem; }
    
    /* MOSTRA E ESTILIZA BOTÕES MOBILE BULK */
    .mobile-bulk-actions { display: flex; gap: 10px; margin-bottom: 15px; }
    .mobile-bulk-actions .btn { flex: 1; text-align: center; }
}